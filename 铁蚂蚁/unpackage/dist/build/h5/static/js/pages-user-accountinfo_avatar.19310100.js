(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-accountinfo_avatar"],{"06a6":function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.dd_piclist li img[data-v-87e576b2]{height:100%}',""]),t.exports=e},"122c":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n("79a9"),i=n("99ab"),r={data:function(){return{userId:"",token:"",userInfo:""}},onLoad:function(){this.userInfo=uni.getStorageSync("userInfo")},onShow:function(){},methods:{upAvatar:function(){var t=this;(0,a.getImgPath)(1,[],["compressed"]).then((function(e){t.userInfo.Avatar=e[0]}))},submit:function(){var t=this;(0,i.pathToBase64)(this.userInfo.Avatar).then((function(e){(0,a.post)("Member/EditHeadImage",{UserId:uni.getStorageSync("userId"),Token:uni.getStorageSync("token"),Avatar:e}).then((function(e){uni.showToast({title:"头像上传成功！"}),t.userInfo.Avatar=e.obj,uni.setStorageSync("userInfo",t.userInfo),setTimeout((function(){uni.navigateBack()}),1500)}))}))}}};e.default=r},"283a":function(t,e,n){var a=n("06a6");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("4f06").default;i("ffde3156",a,!0,{sourceMap:!1,shadowMode:!1})},"99ab":function(t,e,n){"use strict";(function(t){function a(e){return new Promise((function(n,a){if("object"===typeof window&&"document"in window){var i=document.createElement("canvas"),r=i.getContext("2d"),o=new Image;return o.onload=function(){i.width=o.width,i.height=o.height,r.drawImage(o,0,0),t("log",e," at utils/image-tools.js:11");var s=i.toDataURL("image/jpeg",.2),c=s.length,u=parseInt(c-c/8*2),d=(u/1024/1024).toFixed(2);d>1.5&&(uni.showToast({title:"图片过大，请重新上传！",icon:"none"}),a()),n(s)},o.onerror=a,void(o.src=e)}if("object"!==typeof plus)"object"===typeof wx&&wx.canIUse("getFileSystemManager")?wx.getFileSystemManager().readFile({filePath:e,encoding:"base64",success:function(t){n("data:image/png;base64,"+t.data)},fail:function(t){a(t)}}):a(new Error("not support"));else{var s=new plus.nativeObj.Bitmap("bitmap"+Date.now());s.load(e,(function(){try{var t=s.toBase64Data()}catch(e){a(e)}s.clear(),n(t)}),(function(t){s.clear(),a(t)}))}}))}function i(t){return new Promise((function(e,n){if("object"===typeof window&&"document"in window){t=t.split(",");var a=t[0].match(/:(.*?);/)[1],i=atob(t[1]),r=i.length,o=new Uint8Array(r);while(r--)o[r]=i.charCodeAt(r);return e((window.URL||window.webkitURL).createObjectURL(new Blob([o],{type:a})))}var s=t.match(/data\:\S+\/(\S+);/);s?s=s[1]:n(new Error("base64 error"));var c=Date.now()+"."+s;if("object"!==typeof plus)if("object"===typeof wx&&wx.canIUse("getFileSystemManager")){var u=wx.env.USER_DATA_PATH+"/"+c;wx.getFileSystemManager().writeFile({filePath:u,data:t.replace(/^data:\S+\/\S+;base64,/,""),encoding:"base64",success:function(){e(u)},fail:function(t){n(t)}})}else n(new Error("not support"));else{var d=new plus.nativeObj.Bitmap("bitmap"+Date.now());d.loadBase64Data(t,(function(){var t="_doc/uniapp_temp/"+c;d.save(t,{},(function(){d.clear(),e(t)}),(function(t){d.clear(),n(t)}))}),(function(t){d.clear(),n(t)}))}}))}n("ace4"),n("b680"),n("d3b7"),n("e25e"),n("ac1f"),n("3ca3"),n("466d"),n("5319"),n("1276"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("ddb0"),n("2b3d"),Object.defineProperty(e,"__esModule",{value:!0}),e.pathToBase64=a,e.base64ToPath=i}).call(this,n("0de9")["log"])},b17b:function(t,e,n){"use strict";n.r(e);var a=n("122c"),i=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=i.a},e4b8:function(t,e,n){"use strict";var a=n("283a"),i=n.n(a);i.a},f018:function(t,e,n){"use strict";var a,i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bg_f8f8f8"},[n("headers",[t._v("头像")]),n("div",{staticClass:"main"},[n("div",{staticClass:"bindSection"},[t._m(0),n("ul",{staticClass:"dd_piclist li25"},[n("li",[n("div",{staticClass:"outside",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.upAvatar.apply(void 0,arguments)}}},[n("div",{staticClass:"img"},[n("div",{staticClass:"upimg"},[n("img",{staticClass:"uploadImg",attrs:{src:t.userInfo.Avatar||"/static/image/tx/tx_pic.png",id:"useravatarImg"}})])]),n("p",{staticClass:"title"},[t._v("我的头像")])])])])]),n("v-uni-input",{attrs:{type:"hidden",id:"useravatarurl"}}),n("div",{staticClass:"weui-btn weui-btn-active btn-submit",staticStyle:{margin:"15px 12px 20px"},attrs:{href:"javascript:;"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}},[t._v("确定")])],1)],1)},r=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dd__hd"},[n("span",{staticClass:"titleMsg"},[t._v("点击上传图片(上传后，点击可更换图片）")])])}];n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return a}))},f242:function(t,e,n){"use strict";n.r(e);var a=n("f018"),i=n("b17b");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n("e4b8");var o,s=n("f0c5"),c=Object(s["a"])(i["default"],a["b"],a["c"],!1,null,"87e576b2",null,!1,a["a"],o);e["default"]=c.exports}}]);